(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(38)},27:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),c=a.n(o),s=a(2),i=a(3),l=a(5),d=a(4),u=a(6),p=(a(27),a(8)),h=function(){return{type:"setup-new-game"}},m=(a(32),a(33),{RED:{colorName:"snake-color-red"},PINK:{colorName:"snake-color-pink"},YELLOW:{colorName:"snake-color-yellow"},GREEN:{colorName:"snake-color-green"},DEFAULT:{colorName:"snake-color-grey"}}),f={APPLE:{name:"apple",points:15,color:m.RED},STRAWBERRY:{name:"strawberry",points:10,color:m.PINK},BANANA:{name:"banana",points:5,color:m.YELLOW},FROG:{name:"frog",points:20,color:m.GREEN}},y=[f.APPLE,f.STRAWBERRY,f.BANANA,f.FROG],g=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=["grid-cell"];this.props.hasSnake&&(e.push(this.props.snakeColor||m.DEFAULT.colorName),this.props.isSnakeHead?e.push("snake-head"):e.push("snake-body snake-".concat(this.props.nextSnakeDirection))),this.props.hasFood&&e.push("food-name-".concat(this.props.foodInfo.name));var t=e.join(" ");return r.a.createElement("div",{key:this.props.key,className:t})}}]),t}(n.Component),v=Object(p.b)(function(e,t){return e.cellById[t.cellId]||{}})(g),b=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t={gridTemplateColumns:"repeat(".concat(this.props.width,", minmax(0, 1fr))"),gridTemplateRows:"repeat(".concat(this.props.height,", minmax(0, 1fr))")};return r.a.createElement("div",{className:"grid",style:t},function(t,a){for(var n=[],o=0;o<a;o++)for(var c=0;c<t;c++)n.push(r.a.createElement(v,{key:e.props.grid[c][o],cellId:e.props.grid[c][o]}));return n}(this.props.width,this.props.height))}}]),t}(n.Component),k=Object(p.b)(function(e){return e.gridCanvas})(b),w=a(9),O=(a(34),"up"),j="down",E="left",x="right",C=(a(35),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"button-svg"},r.a.createElement("svg",{onClick:this.props.startGame,viewBox:"45 60 400 320",xmlns:"http://www.w3.org/2000/svg",style:{width:"".concat(this.props.config.width)}},r.a.createElement("path",{fill:"#fff",d:"M 90 210 C 90 180 90 150 90 150 C 150 150 180 150 180 150 C 180 150 300 150 300 150 C 300 150 330 150 390 150 C 390 150 390 180 390 210 C 390 240 390 270 390 270 C 330 270 300 270 300 270 C 300 270 180 270 180 270 C 180 270 150 270 90 270 C 90 270 90 240 90 210",mask:"url(#knockout-text)"}),r.a.createElement("mask",{id:"knockout-text"},r.a.createElement("rect",{width:"100%",height:"100%",fill:"#fff",x:"0",y:"0"}),r.a.createElement("text",{x:this.props.config.xCordinates,y:"227",fill:"#000"},this.props.buttonText))))}}]),t}(n.Component)),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).startGame=a.startGame.bind(Object(w.a)(a)),a.pauseGame=a.pauseGame.bind(Object(w.a)(a)),a.setUpNewGame=a.setUpNewGame.bind(Object(w.a)(a)),a.handleKeyDown=a.handleKeyDown.bind(Object(w.a)(a)),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleKeyDown",value:function(e){var t;switch(console.log("handle key down called"),e.keyCode){case 39:case 68:t=x;break;case 38:case 87:t=O;break;case 37:case 65:t=E;break;case 40:case 83:t=j}t&&(e.preventDefault(),this.props.updateDirection(t))}},{key:"startGame",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.props.startGame()}},{key:"pauseGame",value:function(){document.removeEventListener("keydown",this.handleKeyDown),this.props.pauseGame()}},{key:"setUpNewGame",value:function(){document.removeEventListener("keydown",this.handleKeyDown),this.props.setupNewGame()}},{key:"render",value:function(){return this.props.running?this.props.running&&this.props.paused?r.a.createElement("div",{className:"canvas-overlay"},r.a.createElement(C,{startGame:this.startGame,buttonText:"Resume Game",config:{width:"300px",xCordinates:"125"}})):this.props.running&&this.props.dead?r.a.createElement("div",{className:"canvas-overlay"},r.a.createElement("div",{class:"dead-text"},"You are dead !"),r.a.createElement(C,{startGame:this.setUpNewGame,buttonText:"Ok",config:{width:"200px",xCordinates:"210"}})):null:r.a.createElement("div",{className:"canvas-overlay"},r.a.createElement(C,{startGame:this.startGame,buttonText:"Start Game",config:{width:"300px",xCordinates:"141"}}))}}]),t}(n.Component),N=Object(p.b)(function(e){return e.gameState},{startGame:function(){return{type:"start-game"}},updateDirection:function(e){return{type:"update-direction",direction:e}},setupNewGame:h})(S),I=(a(36),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.gameState;return r.a.createElement("div",{className:"score-board-wrapper"},r.a.createElement("div",{className:e.running&&!(e.paused||e.dead||e.error)?"score-board white":"score-board default"},r.a.createElement("div",{className:"game-level"},r.a.createElement("label",null,"Level"),r.a.createElement("span",null,this.props.scoreBoard.level)),r.a.createElement("div",{className:"game-score"},r.a.createElement("label",null,"Score"),r.a.createElement("span",null,this.props.scoreBoard.score)),r.a.createElement("div",{className:"score-board-actions"},r.a.createElement("div",{className:"pause-button"},r.a.createElement("button",{onClick:this.props.pauseGame,disabled:!e.running||e.paused||e.dead||e.error},"Pause Game")))))}}]),t}(n.Component)),G=Object(p.b)(function(e){return{scoreBoard:e.scoreBoard,gameState:e.gameState}},{pauseGame:function(){return{type:"pause-game"}}})(I),D=(a(37),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer"},"Snake Game by ",r.a.createElement("a",{href:"https://www.jaspreet-singh.com",target:"_blank",rel:"noopener noreferrer"},"Jaspreet Singh"),". Hosted with ",r.a.createElement("i",{className:"icon ion-heart"})," by ",r.a.createElement("a",{href:"https://github.com/jaspreet57/snake-game",target:"_blank",rel:"noopener noreferrer"},"Github"))}}]),t}(n.Component)),B=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.setupNewGame()}},{key:"render",value:function(){return r.a.createElement("section",{className:"game-player"},r.a.createElement("div",{className:"grid-canvas-wrapper"},r.a.createElement(G,null),r.a.createElement("div",{className:"grid-canvas"},r.a.createElement(k,null),r.a.createElement(N,null)),r.a.createElement(D,null)))}}]),t}(n.Component),A=Object(p.b)(null,{setupNewGame:h})(B);var F=function(){return r.a.createElement(A,null)},T=a(11),L=a(1),R=a(21),U=a(14),K=a(7),H={running:!1,paused:!1,dead:!1,error:!1},P={level:1,score:0},M={direction:x},W={grid:[],height:0,width:0},Y={},_={},J={head:null,tail:null,length:0,speed:1e3,color:m.DEFAULT},q=20,z=20,Q=500,V={1:{minScore:0,speed:500},2:{minScore:500,speed:300},3:{minScore:1e3,speed:250},4:{minScore:2e3,speed:200}};function X(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function Z(e,t,a){if(t>e-1||t<0)throw new Error("NexNumberInRange: Invalid number !");return a>-1?(t+a)%e:(t+a+e)%e}var $=new(function(){function e(){Object(s.a)(this,e)}return Object(i.a)(e,[{key:"nextStep",value:function(e,t){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){return e({type:"step"})},t.snakeInfo.speed)}}]),e}()),ee=function(e,t){for(var a=[],n={},r=0;r<e;r++){a.push([]);for(var o=0;o<t;o++){var c="cell_".concat(r,"_").concat(o);n[c]={hasSnake:!1,nextSnakeCell:null,nextSnakeDirection:null,isSnakeHead:null,snakeColor:null,hasFood:!1,foodInfo:null,id:c},a[r].push(c)}}var s={x:X(0,e),y:X(0,t)},i={head:s,tail:s,length:1,speed:Q,color:m.DEFAULT.colorName};return n[a[s.x][s.y]]={id:a[s.x][s.y],hasSnake:!0,nextSnakeCell:null,nextSnakeDirection:null,isSnakeHead:!0,snakeColor:m.DEFAULT.colorName,hasFood:!1,foodInfo:null},{gridInfo:{grid:a,width:e,height:t},cellsById:n,snakeInfo:i}},te=function(e){for(var t=e(),a=t.gridCanvas,n=a.grid,r=a.width,o=a.height,c=t.cellById,s=[],i=0;i<r;i++)for(var l=0;l<o;l++){var d=c[n[i][l]];d.hasSnake||d.hasFood||s.push(d)}var u=s[X(0,s.length)],p=y[X(0,y.length)];return{id:u.id,hasFood:!0,foodInfo:p}},ae=function(e,t){var a=e();ne(a,t)&&$.nextStep(t,a)},ne=function(e,t){if(e.gameState.running&&!(e.gameState.paused||e.gameState.error||e.gameState.dead)){var a=function(e,t,a,n){switch(e){case O:return{x:t.x,y:Z(n,t.y,-1)};case x:return{x:Z(a,t.x,1),y:t.y};case j:return{x:t.x,y:Z(n,t.y,1)};case E:return{x:Z(a,t.x,-1),y:t.y};default:return t}}(e.gameControls.direction,e.snakeInfo.head,e.gridCanvas.width,e.gridCanvas.height),n=e.cellById[e.gridCanvas.grid[a.x][a.y]];if(n.hasSnake&&(2===e.snakeInfo.length||e.snakeInfo.tail.x!==a.x||e.snakeInfo.tail.y!==a.y))return function(e){e({type:"dead-game"})}(t);var r={head:a,color:n.hasFood&&n.foodInfo.color.colorName||e.snakeInfo.color,length:n.hasFood&&e.snakeInfo.length+1||e.snakeInfo.length};if(t({type:"add-new-head",payload:{id:n.id,hasSnake:!0,nextSnakeCell:null,nextSnakeDirection:null,isSnakeHead:!0,snakeColor:r.color,hasFood:!1,foodInfo:null}}),t({type:"update-current-head",payload:{id:e.cellById[e.gridCanvas.grid[e.snakeInfo.head.x][e.snakeInfo.head.y]].id,nextSnakeCell:a,isSnakeHead:!1,nextSnakeDirection:e.gameControls.direction}}),!n.hasFood){var o=e.cellById[e.gridCanvas.grid[e.snakeInfo.tail.x][e.snakeInfo.tail.y]];t({type:"remove-current-tail",payload:{id:o.id,nextSnakeCell:null,nextSnakeDirection:null,isSnakeHead:null,hasSnake:!1,snakeColor:null,hasFood:!1,foodInfo:null}}),r.tail=o.nextSnakeCell||a}if(t({type:"update-snake",payload:r}),n.hasFood){var c=e.scoreBoard.score+n.foodInfo.points;t({type:"update-score",payload:{score:c}}),function(e,t,a){V[a+1]&&t>V[a+1].minScore&&(e({type:"update-level",payload:{level:a+1}}),e({type:"update-snake",payload:{speed:V[a+1].speed}}))}(t,c,e.scoreBoard.level),t({type:"create-new-food"})}return!0}return!1},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"place-food":case"add-new-head":case"update-current-head":case"remove-current-tail":return Object(K.a)({},e,t.payload);default:return e}},oe=Object(L.b)({gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setup-new-game":return Object(L.d)(e,L.a.list([L.a.action({type:"reset-game"}),L.a.action({type:"setup-new-score-board"}),L.a.action({type:"update-direction",direction:x}),L.a.run(ee,{successActionCreator:function(e){return{type:"setup-grid",payload:e}},failActionCreator:function(e){return{type:"game-error",error:e}},args:[q,z]})]));case"create-new-food":return Object(L.d)(e,L.a.run(te,{successActionCreator:function(e){return{type:"place-food",payload:e}},failActionCreator:function(e){return{type:"game-error",error:e}},args:[L.a.getState]}));case"game-error":return console.log("Error occured",t.error),Object(K.a)({},e,{error:!0,errorInfo:t.error});case"reset-game":return Object(K.a)({},e,{running:!1,paused:!1,dead:!1,error:!1});case"dead-game":return Object(K.a)({},e,{dead:!0});case"start-game":return Object(L.d)(Object(K.a)({},e,{running:!0,paused:!1,dead:!1,error:!1}),L.a.action({type:"step"}));case"pause-game":return Object(K.a)({},e,{paused:!0});case"step":return Object(L.d)(e,L.a.run(ae,{failActionCreator:function(e){return{type:"game-error",error:e}},args:[L.a.getState,L.a.dispatch]}));default:return e}},scoreBoard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setup-new-score-board":return Object(K.a)({},e,{level:1,score:0});case"update-score":return Object(K.a)({},e,{score:t.payload.score});case"update-level":return Object(K.a)({},e,{level:t.payload.level});default:return e}},gridCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setup-grid":return Object(L.d)(Object(K.a)({},e,{grid:t.payload.gridInfo.grid,width:t.payload.gridInfo.width,height:t.payload.gridInfo.height}),L.a.list([L.a.action({type:"setup-cells-by-id",payload:t.payload.cellsById}),L.a.action({type:"update-snake",payload:t.payload.snakeInfo}),L.a.action({type:"create-new-food"})]));default:return e}},cellById:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setup-cells-by-id":return t.payload;case"place-food":case"add-new-head":case"update-current-head":case"remove-current-tail":return Object(K.a)({},e,Object(U.a)({},t.payload.id,re(e[t.payload.id],t)));default:return e}},snakeInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"update-snake":return Object(K.a)({},e,t.payload);default:return e}},gameControls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"update-direction":return Object(L.d)(Object(K.a)({},e,{direction:t.direction}),L.a.action({type:"step"}));default:return e}}}),ce=Object(R.composeWithDevTools)({})(Object(L.c)()),se=Object(T.createStore)(oe,ce);c.a.render(r.a.createElement(function(){return r.a.createElement(p.a,{store:se},r.a.createElement(F,null))},null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.7bf10842.chunk.js.map